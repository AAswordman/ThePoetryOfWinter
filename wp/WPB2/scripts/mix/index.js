import*as t from"mojang-minecraft";var e={d:(t,s)=>{for(var r in s)e.o(s,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:s[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};class s{constructor(t){this.seed=(t||Date.now())%999999999}next(){return this.seed=(9301*this.seed+49297)%233280,this.seed/233280}nextDouble(){return this.next()}nextLong(){return Math.floor(this.nextDouble()*s.MAX_VALUE)}nextInt(t=s.MAX_VALUE){return Math.floor(this.nextDouble()*t)}nextBoolean(){return this.nextDouble()>=.5}}s.MAX_VALUE=Math.pow(2,32)-1;class r{constructor(t,e){"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):void 0===t&&void 0===e?(this.x=0,this.y=0):(this.x=t.x,this.y=t.y)}set(t,e){return"number"==typeof t?"number"==typeof e&&(this.x=t,this.y=e):this.set(t.x,t.y),this}add(t,e){return"number"==typeof t?"number"==typeof e&&(this.x+=t,this.y+=e):this.add(t.x,t.y),this}sub(t,e){return"number"==typeof t?"number"==typeof e&&(this.x-=t,this.y-=e):this.sub(t.x,t.y),this}scl(t,e,s){return"number"==typeof t?"number"==typeof e&&"number"==typeof s?(this.x*=t,this.y*=e):void 0===e&&void 0===s&&(this.x*=t,this.y*=t):this.sub(t.x,t.y),this}div(t){return this.x/=t,this.y/=t,this}len(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}len2(){return Math.pow(this.x,2)+Math.pow(this.y,2)}equals(t){return this.x===t.x&&this.y===t.y}distance(t){return this.clone().sub(t).len()}toString(){return`(${this.x}, ${this.y})`}[Symbol.toStringTag](){return this.toString()}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}mul(t){return t.x*this.x+t.y*this.y}normalize(){return this.div(this.len()),this}clone(){return new r(this.x,this.y)}}r.back=new r(0,-1),r.forward=new r(0,1),r.left=new r(-1,0),r.one=new r(1,1),r.right=new r(1,0),r.zero=new r(0,0);class i{constructor(t){this.val=null!=t?t:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}clone(){return new i(this.val)}mul(t){const e=new i;for(let s=0;s<4;s++)for(let r=0;r<4;r++){let i=0;this.val[s].forEach(((e,s)=>i+=e*t.val[s][r])),e.val[s][r]=i}return e}}class o{constructor(t,e,s){"number"==typeof t&&"number"==typeof e&&"number"==typeof s?(this.x=t,this.y=e,this.z=s):void 0===t&&void 0===e&&void 0===s?(this.x=0,this.y=0,this.z=0):(this.x=t.x,this.y=t.y,this.z=t.z)}set(t,e,s){return"number"==typeof t?"number"==typeof e&&"number"==typeof s&&(this.x=t,this.y=e,this.z=s):this.set(t.x,t.y,t.z),this}add(t,e,s){return"number"==typeof t?"number"==typeof e&&"number"==typeof s&&(this.x+=t,this.y+=e,this.z+=s):this.add(t.x,t.y,t.z),this}sub(t,e,s){return"number"==typeof t?"number"==typeof e&&"number"==typeof s&&(this.x-=t,this.y-=e,this.z-=s):this.sub(t.x,t.y,t.z),this}scl(t,e,s){return"number"==typeof t?"number"==typeof e&&"number"==typeof s?(this.x*=t,this.y*=e,this.z*=s):void 0===e&&void 0===s&&(this.x*=t,this.y*=t,this.z*=t):this.sub(t.x,t.y,t.z),this}div(t){return this.x/=t,this.y/=t,this.z/=t,this}len(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}len2(){return Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2)}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}distance(t){return this.clone().sub(t).len()}toString(){return`(${this.x}, ${this.y}, ${this.z})`}[Symbol.toStringTag](){return this.toString()}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}mul(t){if(t instanceof i){const e=t.val;return this.set(this.x*e[0][0]+this.y*e[0][1]+this.z*e[0][2]+e[0][3],this.x*e[1][0]+this.y*e[1][1]+this.z*e[1][2]+e[1][3],this.x*e[2][0]+this.y*e[2][1]+this.z*e[2][2]+e[2][3])}return t.x*this.x+t.y*this.y+t.z*this.z}normalize(){return console.log("nor0: "+this),this.div(this.len()),console.log("nor1: "+this),this}clone(){return new o(this.x,this.y,this.z)}}o.down=new o(0,-1,0),o.forward=new o(0,0,1),o.back=new o(0,0,-1),o.left=new o(-1,0,0),o.one=new o(1,1,1),o.right=new o(1,0,0),o.up=new o(0,1,0),o.zero=new o(0,0,0);const n=(h={BlockLocation:()=>t.BlockLocation,Location:()=>t.Location,Vector:()=>t.Vector},u={},e.d(u,h),u);var h,u;class a{static getVector(t){return this._tempVector?(this._tempVector.x=t.x,this._tempVector.y=t.y,this._tempVector.z=t.z,this._tempVector):this._tempVector=new n.Vector(t.x,t.y,t.z)}static getLocation(t){return this._tempLocation?(this._tempLocation.x=t.x,this._tempLocation.y=t.y,this._tempLocation.z=t.z,this._tempLocation):this._tempLocation=new n.Location(t.x,t.y,t.z)}static getBlockLocation(t){return this._tempBlockLocation?(this._tempBlockLocation.x=t.x,this._tempBlockLocation.y=t.y,this._tempBlockLocation.z=t.z,this._tempBlockLocation):this._tempBlockLocation=new n.BlockLocation(t.x,t.y,t.z)}}class c{constructor(t){this._dimension=t}getPlayers(t){return this._dimension.getPlayers(t)}getEntities(t){let e=this._dimension.getEntities(t),s=[];for(let t of e)t.dimension===this._dimension&&s.push(t);return s}getBlock(t){return this._dimension.getBlock(t instanceof o?a.getBlockLocation(t):t)}setBlock(t,e){var s;"string"==typeof e?this.runCommandAsync(`setBlock ${t.x} ${t.y} ${t.z} ${e}`):null===(s=this.getBlock(t))||void 0===s||s.setType(e)}setBlockAsync(t,e){this.runCommandAsync(`setBlock ${t.x} ${t.y} ${t.z} ${e}`)}digBlock(t){try{return this.runCommand(`setBlock ${t.x} ${t.y} ${t.z} air 0 destroy`),!0}catch(t){return!1}}spawnItem(t,e){this._dimension.spawnItem(t,a.getBlockLocation(e))}runCommand(t){return this._dimension.runCommand(t)}runCommandAsync(t){return this._dimension.runCommandAsync(t).then((t=>{}))}static getInstance(t){let e=t;return this.propertyNameCache in e?e[this.propertyNameCache]:e[this.propertyNameCache]=new c(e)}}c.propertyNameCache="exCache";class y{constructor(t,e,s=0){this.mirror=!1,this.structureId=t,this.position=e,this.rotation=s}generate(t){let e=this.rotation,s=c.getInstance(t);console.warn(JSON.stringify(s.runCommand(`structure load ${this.structureId} ${this.position.x} ${this.position.y} ${this.position.z} ${Math.round(e)}_degrees`)))}}class l{constructor(t,e,s=1){this.width=e,this.height=s,this.size=t,this.jigsawData=Array.from(new Array(this.height),(()=>Array.from(new Array(this.width),(()=>new Array(this.width)))))}isEmpty(t,e,s=0){return void 0===this.jigsawData[s][e][t]}setStructurePlane(t,e,s,r,i,o,n=0,h=!1,u=1,a=1){this.setStructure(t,e,0,s,r,i,o,n,h,u,a,1)}setStructure(t,e,s,r,i,o,n,h=0,u=!1,a=1,c=1,y=1){this.clearStructure(t,e,s);for(let r=t;r<a+t;r++)for(let t=e;t<c+e;t++)for(let e=s;e<y+s;e++)if(!this.isEmpty(r,t,e))throw new Error("Structure already contains "+r+" , "+e+" , "+t);for(let r=t;r<a+t;r++)for(let t=e;t<c+e;t++)for(let e=s;e<y+s;e++)this.jigsawData[e][t][r]=l.ContinueStructure;this.jigsawData[s][e][t]=[r,i,o,n,h,u,a,c,y]}getStructureName(t,e,s){}clearStructure(t,e,s=0){const r=this.findBaseStructure(t,e,s);if(void 0!==r){const[i,o,n]=r,h=this.jigsawData[n][o][i];if(void 0!==h){if("number"==typeof h)throw new Error("Error clearing");for(let r=0;r<h[6];r++)for(let i=0;i<h[7];i++)for(let o=0;o<h[8];o++)this.jigsawData[o+s][i+e][r+t]=void 0,console.log("clear ")}}}findBaseStructure(t,e,s=0){let r=this.jigsawData[s][e][t];if(void 0!==r){if(r===l.ContinueStructure){for(;r===l.ContinueStructure&&s>0;)r=this.jigsawData[s--][e][t];for(;r===l.ContinueStructure&&e>0;)r=this.jigsawData[s][e--][t];for(;r===l.ContinueStructure&&t>0;)r=this.jigsawData[s][e][t--];return[t,e,s]}return[t,e,s]}}getWidth(){return this.size*this.width}getHeight(){return this.size*this.height}generate(t,e,s,r){let i=new y("",new o,0);this.jigsawData.forEach(((o,n)=>{o.forEach(((o,h)=>{o.forEach(((o,u)=>{"number"!=typeof o&&void 0!==o&&(i.position.set(t+u*this.size,e+n*this.size,s+h*this.size),i.structureId=o[3],i.rotation=o[4],i.mirror=o[5],i.generate(r))}))}))}))}[Symbol.toStringTag](){return"symbol"}}l.ContinueStructure=1;const f=Array.from(new Array(32),(()=>new Array(32).fill(0)));let x=64;const m=new s(1346),d=(t,e)=>{try{return f[e][t]}catch(t){return 3}};for(let t=14;t<18;t++)for(let e=14;e<18;e++)f[t][e]=4;for(;x>0;)f[m.nextInt(32)][m.nextInt(32)]=1,x--;let p=[[new r,r.forward]];f[1][0]=0;const b=new r;for(;p.length>0;){let t=[];t=[];for(let e of p)if(b.set(e[0]).add(e[1]),!(0!==d(b.x,b.y)||(e[1]!==r.right&&e[1]!==r.left||2===d(b.x,b.y+1)&&2===d(b.x-1,b.y+1)||2===d(b.x,b.y+1)&&2===d(b.x+1,b.y+1)||2===d(b.x,b.y-1)&&2===d(b.x-1,b.y-1)||2===d(b.x,b.y-1)&&2===d(b.x+1,b.y-1))&&(e[1]!==r.forward&&e[1]!==r.back||2===d(b.x+1,b.y+1)&&2===d(b.x+1,b.y)||2===d(b.x+1,b.y-1)&&2===d(b.x+1,b.y)||2===d(b.x-1,b.y+1)&&2===d(b.x-1,b.y)||2===d(b.x-1,b.y-1)&&2===d(b.x-1,b.y)))){f[b.y][b.x]=2;let e=p.length<30?4:Math.min(4,m.nextInt(6)),s=[r.forward,r.back,r.left,r.right];for(;e>0;){let r=m.nextInt(s.length);t.push([b.clone(),s[r]]),s.splice(r,1),e--}}p=t}class w{constructor(t,e,s){this.height=s,this.connections=[],this.x=t,this.y=e}*[Symbol.iterator](){for(let t of this.connections)yield t}connect(t){this.connections.push(t)}[Symbol.toStringTag](){return this.toString()}toString(){return`(${this.x},${this.y},${this.height})`}}const g=Array.from(new Array(16),(()=>new Array(16).fill(0))),_=(t,e)=>{try{return g[e][t]}catch(t){return 3}};for(let t=6;t<10;t++)for(let e=6;e<10;e++)g[t][e]=4;const z=[];for(x=24;x>0;){let t=m.nextInt(16),e=m.nextInt(16);const[s,r]=[16-g.length/2+e,16-g.length/2+t],i=d(s,r);if(4!==_(e,t)&&1==i||0==i){const i=new w(t,e,3+Math.floor(x/4));z.push(i),g[t][e]=i,f[r][s]=5,x--}}z.forEach((t=>{for(let e=-4;e<=4;e++)for(let s=-4;s<=4;s++)if(0!=e||0!=s){let r=_(t.x+e,t.y+s);r instanceof w&&t.connect(r)}}));let S=new l(16,32,10);const M="mystructure:boss_desert_3";f.forEach(((t,e)=>{t.forEach(((t,s)=>{if(1===t)S.setStructurePlane(s,e,0,0,0,["mystructure:boss_desert_9","mystructure:boss_desert_11"][m.nextInt(2)],90*m.nextInt(4));else if(0===t)S.setStructurePlane(s,e,0,0,0,["mystructure:boss_desert_7","mystructure:boss_desert_8","mystructure:boss_desert_10","mystructure:boss_desert_12"][m.nextInt(4)],90*m.nextInt(4));else if(5===t){let t=_(s-16+g.length/2,e-16+g.length/2);if(t instanceof w){let r=t.height;for(;r>=0;)S.setStructure(s,e,r,0,0,0,"mystructure:boss_desert_15",0),r--}}else if(2===t){let t=2===d(s,e+1)?1:0,r=2===d(s,e-1)?1:0,i=2===d(s+1,e)?1:0,o=2===d(s-1,e)?1:0;switch(t+o+i+r){case 1:t+r===1?S.setStructurePlane(s,e,0,0,0,"mystructure:boss_desert_2",0):o+i===1&&S.setStructurePlane(s,e,0,0,0,"mystructure:boss_desert_2",90);break;case 2:if(t+r===2)S.setStructurePlane(s,e,0,0,0,"mystructure:boss_desert_2",0);else if(o+i===2)S.setStructurePlane(s,e,0,0,0,"mystructure:boss_desert_2",90);else if(1===o)if(1===t)S.setStructurePlane(s,e,0,0,0,M,90);else{if(1!==r)throw new Error("num error");S.setStructurePlane(s,e,0,0,0,M,180)}else if(1===i)if(1===t)S.setStructurePlane(s,e,0,0,0,M,0);else{if(1!==r)throw new Error("num error");S.setStructurePlane(s,e,0,0,0,M,270)}break;case 3:0===o?S.setStructurePlane(s,e,0,0,0,"mystructure:boss_desert_4",0):0===r?S.setStructurePlane(s,e,0,0,0,"mystructure:boss_desert_4",90):0===i?S.setStructurePlane(s,e,0,0,0,"mystructure:boss_desert_4",180):0===t&&S.setStructurePlane(s,e,0,0,0,"mystructure:boss_desert_4",270);break;case 4:S.setStructurePlane(s,e,0,0,0,"mystructure:boss_desert_5",0)}}}))}));const v=new o,k=new o;z.forEach((t=>{for(const e of t)if(e.height>t.height){v.set(t.x,t.height,t.y),k.set(e.x,t.height,e.y).sub(v),k.set(k.x>0?1:-1,t.height,k.z>0?1:-1);let s=16-g.length/2;if(m.nextBoolean()){for(;v.x!=e.x;v.x+=k.x)S.isEmpty(v.x+s,v.z+s,v.y)&&S.setStructure(v.x+s,v.z+s,v.y,0,1,0,"mystructure:boss_desert_13");for(;v.z!=e.y;v.z+=k.z)S.isEmpty(v.x+s,v.z+s,v.y)&&S.setStructure(v.x+s,v.z+s,v.y,0,1,0,"mystructure:boss_desert_13")}else{for(;v.z!=e.y;v.z+=k.z)S.isEmpty(v.x+s,v.z+s,v.y)&&S.setStructure(v.x+s,v.z+s,v.y,0,1,0,"mystructure:boss_desert_13");for(;v.x!=e.x;v.x+=k.x)S.isEmpty(v.x+s,v.z+s,v.y)&&S.setStructure(v.x+s,v.z+s,v.y,0,1,0,"mystructure:boss_desert_13")}}})),S.jigsawData.forEach((t=>{t.forEach((t=>{console.log(JSON.stringify(t.map((t=>null==t?0:1))))}))}));